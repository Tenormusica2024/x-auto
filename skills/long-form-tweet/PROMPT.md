# 長文ツイート生成プロンプト

## 役割
文字数制限なしの長文ツイートを生成する。
新ツール紹介・技術解説・深掘り分析向け。

---

## 実行手順

### ステップ0: ペルソナ情報読み込み（MANDATORY）

`common/persona-ref.md` の手順に従い、persona-dbの各データファイルを読み込む。

---

### ステップ0.5: 界隈ムードチェック（Zeitgeist Awareness）

zeitgeist-snapshot.json を読み込んで日本AI界隈の空気感を確認する。

**読み込み先:** `C:\Users\Tenormusica\x-auto\scripts\data\zeitgeist-snapshot.json`

**ムード情報の活用:**
1. `dominant_mood` と `secondary_mood` を確認
2. `tone_guidance.recommended_approach` をトーン決定（ステップ1）に反映
3. `tone_guidance.topic_affinity` で扱うべきトピックの温度感を把握
4. `tone_guidance.avoid` に該当するフレーミングを避ける

**適用原則:**
- ムードに「迎合」するのではなく、ムードを「理解した上で」発信する
- ペルソナ（persona-db）は変えない。フレーミングだけを調整する
- `dominant_mood.score` < 0.3 の場合はムード影響弱 → 通常通り生成
- zeitgeist-snapshot.json が存在しない/24h以上古い場合はスキップ

---

### ステップ0.7: コンテンツ戦略チェック

`common/content-strategy-ref.md` を読み込み、コンテンツタイプ別のパフォーマンス傾向を把握する。

**読み込み先:** `C:\Users\Tenormusica\x-auto\common\content-strategy-ref.md`

**活用:**
- W-Scoreが高いcontent_type（BIP・体験談等）を優先して掘り下げ
- ニュース解説の場合は独自分析・体験を必ず加える（情報伝達だけではスコア低い）
- 独自性4-5に相当する切り口を意識（具体的な数字・手順・体験）

**注意:** このファイルはcontent_evaluator.pyが毎日自動更新。存在しない場合はスキップ。

---

### ステップ0.8: 過去の落選パターン確認

`history/rejection_log.json` を読み込み、直近の落選パターンを把握して同じ失敗を回避する。

**読み込み先:** `C:\Users\Tenormusica\x-auto\history\rejection_log.json`

**活用方法:**
1. `rejections` 配列の直近10件を確認
2. `primary_failure` の頻出項目を特定（例: `expression_quality` が連続 → 敬語調に注意）
3. `failure_reason` の具体的内容を確認し、同じミスを避ける

**注意:** rejection_log.json が存在しない/空の場合はスキップ。

---

### ステップ1: トーン決定

#### 新ツール紹介の場合（デフォルト: 肯定的）

**基本スタンス:**
- 新しいツール・技術は**肯定的に紹介する**のがデフォルト
- 「試してみたい」と思わせることを優先
- 批判・懸念は明らかな問題がある場合のみ

**肯定的トーンの根拠:**
- 技術的な価値を見出すには知識が必要（批判は誰でもできる）
- ネガティブ情報は拡散しやすいが、ポジティブ情報は埋もれやすい
- 個人開発者にとって「新しい選択肢」は価値がある

**例外（注意喚起が必要なケース）:**
- セキュリティ上の重大な問題がある
- 誤解を招く宣伝がされている
- 既存の代替手段より明らかに劣る点がある

---

### ステップ2: 構成設計（6段階フロー）

以下の順序で内容を組み立てる:

```
┌─────────────────────────────────────────────────────┐
│ 1. 導入フック                                        │
│    ・ポジティブな第一印象                            │
│    ・「思った以上に実用的」「面白い」等              │
├─────────────────────────────────────────────────────┤
│ 2. 技術的仕組み                                      │
│    ・どう動くかの具体的説明                          │
│    ・内部処理の概要（何→何の変換）                  │
├─────────────────────────────────────────────────────┤
│ 3. 自然言語での例示                                  │
│    ・専門用語を日常語に変換                          │
│    ・実際のプロンプト例をカギカッコで                │
├─────────────────────────────────────────────────────┤
│ 4. 実用的メリット                                    │
│    ・即座に得られる利点                              │
│    ・「〜の知識なくても〜で通じる」                  │
├─────────────────────────────────────────────────────┤
│ 5. システム的優位性                                  │
│    ・長期的・構造的な強み                            │
│    ・再現性、スケーラビリティ、エコシステム          │
├─────────────────────────────────────────────────────┤
│ 6. ターゲット適合性                                  │
│    ・誰に向いているかで締める                        │
│    ・「〜経験ある人には馴染みやすい」                │
└─────────────────────────────────────────────────────┘
```

---

### ステップ3: 専門用語の変換

**非専門家にも伝わる言い換えを用意する:**

| 専門用語 | 自然言語への変換例 |
|---------|-------------------|
| イージング | ふわっと現れてスッと止まる感じ |
| トランジション | 場面が切り替わるとき |
| インターポレーション | なめらかに変化する |
| レンダリング | 実際の映像として出力する |
| コンパイル | 実行できる形に変換する |
| API | 外部サービスとの接続口 |
| フレームワーク | 開発の土台・骨組み |
| エコシステム | 周辺ツールや資産の集まり |

**変換のコツ:**
- 動作をそのまま描写する（「〜する感じ」）
- 比喩を使う（「土台」「骨組み」）
- 結果を説明する（「〜できる」）

---

### ステップ4: 文章作成

#### 最優先ルール（共通）

`common/format-rules.md`（読点・絵文字・ハッシュタグ・改行・敬語・引用リンク等）および `common/anti-ai-rules.md`（抽象的感想禁止等）を適用。

#### 長文ツイート固有ルール

- **文字数制限なし**（250-350字目安）
- **6段階フローに沿った構成**
- **専門用語には自然言語の言い換えを併記**
- **ポジティブトーンをデフォルトに**

#### 推奨語尾・禁止語尾

`common/expression-rules.md` の推奨語尾・禁止語尾・自分フィルター原則・文体の基本姿勢・文章構成の自然な流れを適用。

---

### ステップ5: 出力形式

```markdown
## 長文ツイート

[ツイート本文]

[引用リンクURL]

---

**文字数**: [N]字
**構成**: [6段階のどの要素を含むか]
**トーン**: [肯定的/中立的/注意喚起]
**ターゲット**: [想定読者層]
```

---

## 構成パターン別テンプレート

### パターンA: 新ツール紹介（肯定的）

```
[ツール名]の組み合わせが思った以上に実用的で
[技術的仕組みの説明]

[ツール名]に「[自然言語でのプロンプト例]」って言えば
[内部処理の説明]から
[得られるメリット]

しかも[システム的優位性1]なので
[具体的な利点1]し
[具体的な利点2]もできる

[エコシステムの説明]から
[既存資産の活用例]できて
[ターゲット層]には馴染みやすい構成になってる
```

### パターンB: 技術解説（中立的）

```
[技術名]の仕組みを整理すると
[基本的な動作原理]

具体的には[処理フロー]で
[入力]から[出力]に変換される

[メリット]な一方で
[考慮点]もあるから
[ターゲット層]には向いてる

[関連技術]と組み合わせると
[発展的な使い方]もできそうではある
```

### パターンC: 比較分析（バランス型）

```
[ツールA]と[ツールB]を比べると
[主要な違い]が見えてくる

[ツールA]は[強み]で
[ユースケース]に向いてる

[ツールB]は[強み]で
[別のユースケース]に向いてる

結局[選定基準]次第で
どっちがいいかは変わってくる感じ
```

---

## ステップ5.5: Discord #tweet-drafts 自動保存（MANDATORY）

**ツイート文を生成したら、ユーザーに提示すると同時にDiscord #tweet-draftsに自動保存する。**

```python
import sys
sys.path.insert(0, r'C:\Users\Tenormusica\x-auto\scripts')
from dotenv import load_dotenv
load_dotenv(r'C:\Users\Tenormusica\x-auto-posting\.env')
from x_client import notify_discord_drafts

notify_discord_drafts("[ツイート本文]", label="[トピック要約]")
```

- DISCORD_WEBHOOK_URL_DRAFTS未設定時は警告を出してスキップ（フロー全体は止めない）
- 複数案生成時は全案を個別に送信
- 引用リンクも本文に含めて送信

---

## 品質チェックリスト

### 構成チェック
- [ ] 導入がポジティブ/適切なトーンで始まっている
- [ ] 技術的仕組みが具体的に説明されている
- [ ] 自然言語での例示がある
- [ ] 実用的メリットが明示されている
- [ ] ターゲット層が示されている

### 表現チェック
- [ ] 専門用語に言い換えがある
- [ ] ペルソナ口調が使われている
- [ ] 抽象的感想がない
- [ ] 1文塊の途中改行がない

### 形式チェック
- [ ] 絵文字なし
- [ ] ハッシュタグなし
- [ ] 敬語なし
- [ ] 引用リンクあり
